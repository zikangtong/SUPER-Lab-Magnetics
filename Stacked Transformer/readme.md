# Stacked Transformer Modeling

##### Author: Zikang Tong
##### Description:
This folder contains documents and files instructing the user how to model a 3-D printed toroidal inductor in COMSOL. 
**To start, you must open the COMSOL Multiphysics 5.4a with MATLAB application.**

## Script Usage Tutorial
The script [stacked_transformer.m](stacked_transformer.m) contains the code used to retrieve the AC impedance of a toroidal inductor with square cross-section. The user sets the parameters shown below.

```
ri = 8;
ro = 15;
h = 4;
t = 1.5;
separation = 1;

%   Step 2: provide a list of number of turns 
%   Primary:
prim_list = [4, 4, 4, 6, 6];
%   Secondary:
sec_list = [7, 9, 9, 9, 9];
toroid_spacing = 1;

I_prim=1;
I_sec=0;
freq = 20e6;

mph_fileloc = 'G:\My Drive\Magnetics Project\MATLAB\';
mph_filename = 'delete1.mph';

```

### Toroid Geometry Initialization
The first line, **mph_fileloc**, specifies the folder path of where to save the .mph file generated by the script. The second line, **mph_filename**, specifies the filename of the .mph file. Note that the filename **MUST** end with .mph.

**ri** refers to the inner radius of the toroid.

**ro** refers to the outer radius.

**h** refers to the height of the toroid.

**t** refers to the thickness of the toroid. Note that the structure is hollow so the thickness determines the structural robustness of the print.

**separation** refers to the distance spacing between each winding. This determines the voltage isolation capabilities of the structure.

**prim_list** is the vector containing the number of turns for each toroid for the primary winding. If the vector length is 5, then there are 5 toroids. In the example, the vector list is [4, 4, 4, 6, 6] meaning the number of turns for each of the 5 toroids is 4, 4, 4, 6, and 6. 

**sec_list** is the same as **prim_list** except it refers to the secondary winding.

**toroid_spacing** refers to the gap distance between adjacent toroids.

All units are in mm and below shows a figure of a toroidal inductor with the parameters labeled.

### Simulation Parameters Initialization
For simulation, the transformer is injected by a lumped port current source with amplitude **I_prim** at the primary and **I_sec** at the secondary, and frequency of **freq**. The units are in A and Hz. 

# Nested Transformer Modeling

##### Author: Zikang Tong
##### Description:
This folder contains documents and files instructing the user how to model a 3-D printed toroidal inductor in COMSOL. 
**To start, you must open the COMSOL Multiphysics 5.4a with MATLAB application.**

## Script Usage Tutorial
The script [stacked_transformer.m](stacked_transformer.m) contains the code used to retrieve the AC impedance of a toroidal inductor with square cross-section. The user sets the parameters shown below.

```
mph_fileloc = 'G:\My Drive\Magnetics Project\COMSOL\';
mph_filename = 'nested_toroid.mph';

out_ri = 8; 
out_ro = 19;
out_h = 12.5;
out_t = 1.5;
out_separation = 1.5;
out_turns = 14;

in_ri = 12;
in_ro = 16.3;
in_h = 6.5;
in_t = 1.5;
in_separation = 1.5;
in_turns = 20;

I_prim = 1;
I_sec = 1;
freq = 20e6;%units in Hz

```

### Toroid Geometry Initialization
The first line, **mph_fileloc**, specifies the folder path of where to save the .mph file generated by the script. The second line, **mph_filename**, specifies the filename of the .mph file. Note that the filename **MUST** end with .mph.

**ri** refers to the inner radius of the toroid.

**ro** refers to the outer radius.

**h** refers to the height of the toroid.

**t** refers to the thickness of the toroid. Note that the structure is hollow so the thickness determines the structural robustness of the print.

**separation** refers to the distance spacing between each winding. This determines the voltage isolation capabilities of the structure.

**turns** refers to number of turns.

All units are in mm and below shows a figure of a toroidal inductor with the parameters labeled.

If the variable begins with **out_**, it refers to the outer toroid. If the variable begins with **in_**, it refers to the inner toroid.

### Simulation Parameters Initialization
For simulation, the transformer is injected by a lumped port current source with amplitude **I_prim** at the primary and **I_sec** at the secondary, and frequency of **freq**. The units are in A and Hz. 
